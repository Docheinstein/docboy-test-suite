IF !DEF(BOOTSTRAP_INC)
DEF BOOTSTRAP_INC EQU 1

IF !DEF(HEADER_TITLE)
    DEF HEADER_TITLE EQUS "\"DOCTESTX\""
ENDC

IF !DEF(HEADER_CGB_FLAG)
    DEF HEADER_CGB_FLAG EQU $00
ENDC

ASSERT !(DEF(HEADER_NEW_LICENSEE_CODE) && DEF(HEADER_NEW_LICENSEE_CODE_STR))

IF !DEF(HEADER_NEW_LICENSEE_CODE) && !DEF(HEADER_NEW_LICENSEE_CODE_STR)
    DEF HEADER_NEW_LICENSEE_CODE EQU $0000
ENDC

IF !DEF(HEADER_SGB_FLAG)
    DEF HEADER_SGB_FLAG EQU $00
ENDC

IF !DEF(HEADER_CARTRIDGE_TYPE)
    DEF HEADER_CARTRIDGE_TYPE EQU $00
ENDC

IF !DEF(HEADER_RAM_SIZE)
    DEF HEADER_RAM_SIZE EQU $00
ENDC

IF !DEF(HEADER_DESTINATION_CODE)
    DEF HEADER_DESTINATION_CODE EQU $01
ENDC

IF !DEF(HEADER_OLD_LICENSEE_CODE)
    DEF HEADER_OLD_LICENSEE_CODE EQU $00
ENDC

IF !DEF(HEADER_ROM_VERSION)
    DEF HEADER_ROM_VERSION EQU $00
ENDC

DEF CGB EQU (HEADER_CGB_FLAG & $80 == $80) && (HEADER_CGB_FLAG & $0c == 0)

SECTION "Header", ROM0[$100]
    ; $100
    nop
    jp EntryPoint

    ; $104
    ds $134 - @, $00

    ; $134
    db HEADER_TITLE
    ds $143 - @, $00

    ; $143
    db HEADER_CGB_FLAG

    ; $144
IF DEF(HEADER_NEW_LICENSEE_CODE_STR)
    db HEADER_NEW_LICENSEE_CODE_STR
ELSE
    dw HEADER_NEW_LICENSEE_CODE
ENDC

    ; $146
    db HEADER_SGB_FLAG

    ; $147
    db HEADER_CARTRIDGE_TYPE

    ; $148
    ds $149 - @, $00

    ; $149
    db HEADER_RAM_SIZE

    ; $14A
    db HEADER_DESTINATION_CODE

    ; $14B
    db HEADER_OLD_LICENSEE_CODE

    ; $14C
    db HEADER_ROM_VERSION

    ds $150 - @, $00


SECTION "Home", ROM0[$150]

ENDC
